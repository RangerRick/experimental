Package: mx4j
Version: 2.1.1
Revision: 6
Description: Java Management Extensions
Type: java(1.5)
License: Restrictive/Distributable
Maintainer: Benjamin Reed <mx4j@fink.raccoonfink.com>

Depends: <<
	axis,
	bcel,
	javamail,
	jython,
	system-java (>= 1.5-1)
<<
BuildDepends: <<
	ant-base (>= 1.7.1-3),
	ant-junit (>= 1.6.5-1),
	ant-optional (>= 1.6.5-1),
	axis,
	bcel,
	fink (>= 0.29.7-1),
	javamail,
	jython,
	system-java-dev (>= 1.5-1),
	xmlunit
<<

CustomMirror: <<
	nam-US: http://ranger.befunk.com/fink
	nam-US: http://astrange.ithinksw.net/ranger-fink
	nam-CA: http://www.southofheaven.net/befunk
<<
Source: mirror:sourceforge:%n/%n-%v-src.tar.gz
Source-MD5: 59ae019c5e2cf6825dc35b2886ca1bdc
Source2: mirror:custom:%n-docbook.zip
Source2-MD5: 900d7609fb7e6d78901b357e4acfbc17
Source3: mirror:custom:%n-docbookx.zip
Source3-MD5: 731d5c3d3330f62520c080a92afe0ed2
Source4: mirror:sourceforge:saxon/saxon6-5-5.zip
Source4-MD5: e913002af9c6bbb4c4361ff41baac3af
SourceDirectory: %n-%v
PatchScript: <<
	%{default_script}
	perl -pi -e 's,<javac,<javac target="1.5" source="1.4",g' build/build.xml
	cp %p/src/%n-*.zip .
	cp %p/share/jython/jython-complete.jar lib/
	cp ../saxon*.jar lib/
<<
PatchFile: %n.patch
PatchFile-MD5: 0927861a55f49ee2d6d2bab54ea6f111

UseMaxBuildJobs: true
CompileScript: <<
	#!/bin/sh -ex
	
	find . -name jetty -exec rm -rf {} \; || :
	pushd build
	export CLASSPATH="%b/saxon-xml-apis.jar:%b/saxon.jar:$CLASSPATH"
	ANT_OPTS="-Djavax.xml.transform.TransformerFactory=com.icl.saxon.TransformerFactoryImpl" ant release -Ddocbook.dtd.zip.file=%b/%n-docbook.zip -Ddocbook.xsl.zip.file=%b/%n-docbookx.zip
	popd
<<

InstallScript: <<
#!/bin/sh -ex

	install -d -m 755 %i/share/doc/%n
	mv dist/docs/api/* %i/share/doc/%n/
	mv dist/examples %i/share/doc/%n/

	find %i/share/doc/%n -type d -exec chmod 755 {} \;
	find %i/share/doc/%n -type f -exec chmod 644 {} \;
<<
JarFiles: dist/lib/*.jar
DocFiles: *LICENSE* BUILD* README*

Homepage: http://mx4j.sourceforge.net/
DescDetail: <<
MX4J is an initiative to build an Open Source implementation for the
JMX technology specification, and to build related tools.
<<

