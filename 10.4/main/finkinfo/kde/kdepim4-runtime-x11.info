Info4: <<
Package: kdepim4-runtime-x11
Version: 4.4.6
Revision: 1
Description: KDE4 - PIM (Runtime)
Type: kde (x11)
License: GPL/LGPL
Maintainer: Benjamin Reed <kdepim4@fink.raccoonfink.com>

Depends: 
BuildDepends: <<
	akonadi-%type_pkg[kde]-dev (>= 1.4.0-1),
	automoc-%type_pkg[kde] (>= 0.9.89-0),
	boost1.41.cmake,
	cmake (>= 2.8.2-1),
	dbus1.3-dev (>= 1.2.24-1),
	fink (>= 0.29.7-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.12-1),
	glib2-dev (>= 2.22.0-1),
	gpgme11,
	gnokii3-dev,
	kde4-buildenv (>= 4.5.1-1),
	kdebase4-%type_pkg[kde]-dev (>= 4.5.2-1),
	kdelibs4-%type_pkg[kde]-dev (>= 4.5.2-1),
	kdepimlibs4-%type_pkg[kde]-dev (>= 4.5.2-1),
	libassuan2,
	libgettext8-dev,
	libgpg-error,
	libidn,
	libjpeg8,
	libmal10 (>= 0.44-1),
	libopensync1-dev,
	pilot-link09,
	pkgconfig (>= 0.23-1),
	python25,
	qca2-%type_pkg[kde] (>= 2.0.2-1),
	qgpgme1-%type_pkg[kde] (>= 4.5.2-1),
	qt4-%type_pkg[kde] (>= 4.6.3-1),
	soprano-%type_pkg[kde]-dev (>= 2.5.2-1),
	speex3,
	strigi-dev (>= 0.6.3-1),
	(%type_pkg[kde] = x11) x11-dev,
	system-openssl-dev
<<
GCC: 4.0

Source: mirror:kde:stable/kdepim-%v/src/kdepim-runtime-%v.tar.bz2
Source-MD5: b690b2f0e926d03fc1c6c51a9bb14fdd

UseMaxBuildJobs: true
CompileScript: <<
	#!/bin/sh -ev
	
	export KDE4_PREFIX="%p" KDE4_TYPE="%type_pkg[kde]"
	. %p/sbin/kde4-buildenv.sh
	export CMAKE_INCLUDE_PATH="%p/include/libmal:$CMAKE_INCLUDE_PATH"
	export CPPFLAGS="-I%p/include/libmal $CPPFLAGS"
	
	mkdir -p build
	pushd build
	cmake $KDE4_CMAKE_ARGS ..
	make VERBOSE=1
	popd
<<

InstallScript: <<
#!/bin/sh -ev

	pushd build
		make -j1 install/fast DESTDIR="%d"
	popd

	if [ -d "%i/opt/kde4/%type_pkg[kde]/bin/akonadiconsole_bin.app" ]; then
		install -d -m 755 "%i/opt/kde4/%type_pkg[kde]/bin/akonadiconsole.app/Contents/Resources"
		mv "%i/opt/kde4/%type_pkg[kde]/bin/akonadiconsole_bin.app/Contents/Resources"/*.icns "%i/opt/kde4/%type_pkg[kde]/bin/akonadiconsole.app/Contents/Resources"
		rm -rf "%i/opt/kde4/%type_pkg[kde]/bin/akonadiconsole_bin.app"
	fi
	if [ -d "%i/opt/kde4/%type_pkg[kde]/bin/kalarm_bin.app" ]; then
		install -d -m 755 "%i/opt/kde4/%type_pkg[kde]/bin/kalarm.app/Contents/Resources"
		mv "%i/opt/kde4/%type_pkg[kde]/bin/kalarm_bin.app/Contents/Resources"/*.icns "%i/opt/kde4/%type_pkg[kde]/bin/kalarm.app/Contents/Resources"
		rm -rf "%i/opt/kde4/%type_pkg[kde]/bin/kalarm_bin.app"
	fi
	if [ -d "%i/opt/kde4/%type_pkg[kde]/bin/_kleopatra_mainwindow.app" ]; then
		install -d -m 755 "%i/opt/kde4/%type_pkg[kde]/bin/kleopatra.app/Contents/Resources"
		mv "%i/opt/kde4/%type_pkg[kde]/bin/_kleopatra_mainwindow.app/Contents/Resources"/*.icns "%i/opt/kde4/%type_pkg[kde]/bin/kleopatra.app/Contents/Resources"
		rm -rf "%i/opt/kde4/%type_pkg[kde]/bin/_kleopatra_mainwindow.app"
	fi
	if [ -d "%i/opt/kde4/%type_pkg[kde]/bin/_kgpgconf.app" ]; then
		install -d -m 755 "%i/opt/kde4/%type_pkg[kde]/bin/kgpgconf.app/Contents/Resources"
		mv "%i/opt/kde4/%type_pkg[kde]/bin/_kgpgconf.app/Contents/Resources"/*.icns "%i/opt/kde4/%type_pkg[kde]/bin/kgpgconf.app/Contents/Resources"
		rm -rf "%i/opt/kde4/%type_pkg[kde]/bin/_kgpgconf.app"
	fi
	if [ -d "%i/opt/kde4/%type_pkg[kde]/bin/kontact_bin.app" ]; then
		install -d -m 755 "%i/opt/kde4/%type_pkg[kde]/bin/kontact.app/Contents/Resources"
		mv "%i/opt/kde4/%type_pkg[kde]/bin/kontact_bin.app/Contents/Resources"/*.icns "%i/opt/kde4/%type_pkg[kde]/bin/kontact.app/Contents/Resources"
		rm -rf "%i/opt/kde4/%type_pkg[kde]/bin/kontact_bin.app"
	fi

	rm -rf "%i/opt/kde4/%type_pkg[kde]/bin/kabcclient.app"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/bin/konsolekalendar.app"

	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libakonadi-kcal_next.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libakonadi_next.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libakregatorinterfaces.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libgwsoap.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkabc_groupdav.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkabc_slox.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkabc_xmlrpc.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkabcommon.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkabcgroupwise.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkabckolab.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkabcscalix.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkabinterfaces.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkalarm_calendar.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkalarm_resources.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkcal_groupdav.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkcal_resourceblog.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkcal_resourceremote.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkcal_slox.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkcal_xmlrpc.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkcalgroupwise.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkcalkolab.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkcalscalix.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkdepim.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkgroupwarebase.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkgroupwaredav.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkleo.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkleopatraclientcore.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkleopatraclientgui.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libknodecommon.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libknotes_xmlrpc.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libknoteskolab.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libknotesscalix.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkorg_stdprinting.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkorganizer_calendar.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkorganizer_core.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkorganizer_eventviewer.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkorganizer_interfaces.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkpgp.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libksieve.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libkslox.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libmessagecore.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libmessagelist.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libmessageviewer.dylib"
	rm -rf "%i/opt/kde4/%type_pkg[kde]/lib/libmimelib.dylib"

	mkdir -p %i/share/doc/installed-packages
	touch %i/share/doc/installed-packages/%N
<<
SplitOff33: <<
	Package: %N-akonadi
	Description: KDE4 - akonadi tools for kdepim
	Depends: <<
		kdepimlibs4-%type_pkg[kde]-shlibs (>= 4.5.2-1),
		libkdepim4-%type_pkg[kde]-shlibs (>= %v-%r),
		%N-base (>= %v-%r)
	<<
	Files: <<
		opt/kde4/%type_pkg[kde]/bin/akonadiconsole*
		opt/kde4/%type_pkg[kde]/lib/libakonadi-kcal_next.4*.dylib
		opt/kde4/%type_pkg[kde]/lib/libakonadi_next.4*.dylib
		opt/kde4/%type_pkg[kde]/share/applications/kde4/akonadiconsole*
		opt/kde4/%type_pkg[kde]/share/apps/akonadi*
	<<
	Shlibs: <<
		%p/opt/kde4/%type_pkg[kde]/lib/libakonadi-kcal_next.4.dylib 4.0.0 %n (>= 4.3.98-1)
		%p/opt/kde4/%type_pkg[kde]/lib/libakonadi_next.4.dylib      4.0.0 %n (>= 4.3.98-1)
	<<
<<
SplitOff34: <<
	Package: blogilo4-%type_pkg[kde]
	Description: KDE4 - blogging utility
	Depends: %N-base (>= %v-%r)
	Files: <<
		opt/kde4/%type_pkg[kde]/bin/blogilo*
		opt/kde4/%type_pkg[kde]/share/applications/kde4/blogilo*
		opt/kde4/%type_pkg[kde]/share/apps/blogilo*
		opt/kde4/%type_pkg[kde]/share/config.kcfg/blogilo*
		opt/kde4/%type_pkg[kde]/share/doc/HTML/en/blogilo*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/128x128/actions/upload-media*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/128x128/apps/blogilo*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/16x16/actions/format-text-*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/16x16/actions/insert-more-mark*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/16x16/actions/remove-link*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/16x16/actions/upload-media*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/16x16/apps/blogilo*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/22x22/actions/format-text-*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/22x22/actions/insert-more-mark*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/22x22/actions/remove-link*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/22x22/actions/upload-media*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/22x22/apps/blogilo*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/32x32/actions/upload-media*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/32x32/apps/blogilo*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/48x48/actions/upload-media*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/48x48/apps/blogilo*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/64x64/actions/upload-media*
		opt/kde4/%type_pkg[kde]/share/icons/hicolor/64x64/apps/blogilo*
	<<
	PostInstScript: %p/opt/kde4/%type_pkg[kde]/bin/kde4-postinst.sh || :
<<
SplitOff35: <<
	Package: %N-console-tools
	Description: KDE4 - console tools for kdepim
	Depends: %N-base (>= %v-%r)
	Files: <<
		opt/kde4/%type_pkg[kde]/bin/kabc2mutt*
		opt/kde4/%type_pkg[kde]/bin/kabcclient*
		opt/kde4/%type_pkg[kde]/bin/konsolekalendar*
		opt/kde4/%type_pkg[kde]/share/applications/kde4/konsolekalendar*
		opt/kde4/%type_pkg[kde]/share/apps/konsolekalendar*
		opt/kde4/%type_pkg[kde]/share/doc/HTML/en/kabcclient*
		opt/kde4/%type_pkg[kde]/share/doc/HTML/en/konsolekalendar*
		opt/kde4/%type_pkg[kde]/share/man/man1/kabcclient*
	<<
	PostInstScript: %p/opt/kde4/%type_pkg[kde]/bin/kde4-postinst.sh || :
<<
SplitOff36: <<
	Package: nepomuk-email-feeder4-%type_pkg[kde]
	Description: KDE4 - nepomuk email scanner
	Depends: <<
		libmessagecore4-%type_pkg[kde]-shlibs (>= %v-%r),
		libmessageviewer0-%type_pkg[kde]-shlibs (>= %v-%r),
		kdepimlibs4-%type_pkg[kde]-shlibs (>= 4.5.2-1),
		%N-base (>= %v-%r)
	<<
	Files: <<
		opt/kde4/%type_pkg[kde]/bin/akonadi_nepomuk*
		opt/kde4/%type_pkg[kde]/share/akonadi/agents/nepomukemailfeeder*
	<<
	PostInstScript: %p/opt/kde4/%type_pkg[kde]/bin/kde4-postinst.sh || :
<<
SplitOff40: <<
	Package: %N-base
	Description: KDE4 - kdepim base package
	Depends: <<
		kdebase4-runtime-%type_pkg[kde] (>= 4.5.2-1),
		kdepimlibs4-%type_pkg[kde]-shlibs (>= 4.5.2-1),
		strigi-gui-%type_pkg[kde]-shlibs
	<<
	Files: opt
	PostInstScript: %p/opt/kde4/%type_pkg[kde]/bin/kde4-postinst.sh || :
<<

DescDetail: 
<<

