diff -Nurd kdebase-runtime-4.3.0/kcontrol/componentchooser/CMakeLists.txt kdebase-runtime-4.3.0-new/kcontrol/componentchooser/CMakeLists.txt
--- kdebase-runtime-4.3.0/kcontrol/componentchooser/CMakeLists.txt	2008-09-17 16:54:29.000000000 -0400
+++ kdebase-runtime-4.3.0-new/kcontrol/componentchooser/CMakeLists.txt	2009-07-29 21:58:19.000000000 -0400
@@ -19,10 +19,10 @@
     componentchooserterminal.cpp ktimerdialog.cpp)
 endif(NOT WIN32)
 
-if(NOT APPLE AND NOT WIN32)
+if(Q_WS_X11)
   set(kcm_componentchooser_SRCS ${kcm_componentchooser_SRCS}
      componentchooserwm.cpp )
-endif(NOT APPLE AND NOT WIN32)
+endif(Q_WS_X11)
 
 
 kde4_add_ui_files(kcm_componentchooser_SRCS 
diff -Nurd kdebase-runtime-4.3.0/kioslave/thumbnail/CMakeLists.txt kdebase-runtime-4.3.0-new/kioslave/thumbnail/CMakeLists.txt
--- kdebase-runtime-4.3.0/kioslave/thumbnail/CMakeLists.txt	2009-04-28 09:46:08.000000000 -0400
+++ kdebase-runtime-4.3.0-new/kioslave/thumbnail/CMakeLists.txt	2009-07-29 21:58:19.000000000 -0400
@@ -90,7 +90,7 @@
 
    kde4_add_plugin(exrthumbnail ${exrthumbnail_PART_SRCS})
 
-   target_link_libraries(exrthumbnail ${KDE4_KIO_LIBS} ${OPENEXR_LIBRARIES})
+   target_link_libraries(exrthumbnail ${KDE4_KIO_LIBS} ${OPENEXR_LIBRARIES} z)
 
    install(TARGETS exrthumbnail DESTINATION ${PLUGIN_INSTALL_DIR})
    install( FILES exrthumbnail.desktop DESTINATION ${SERVICES_INSTALL_DIR})
diff -Nurd kdebase-runtime-4.3.0/knotify/CMakeLists.txt kdebase-runtime-4.3.0-new/knotify/CMakeLists.txt
--- kdebase-runtime-4.3.0/knotify/CMakeLists.txt	2009-06-17 16:06:00.000000000 -0400
+++ kdebase-runtime-4.3.0-new/knotify/CMakeLists.txt	2009-07-29 21:58:19.000000000 -0400
@@ -21,6 +21,12 @@
 set (knotify_OUTPUT_NAME knotify4)
 kde4_add_executable( knotify ${knotify_SRCS})
 
+if (Q_WS_MAC)
+    set_target_properties(knotify PROPERTIES MACOSX_BUNDLE_INFO_PLIST ${CMAKE_CURRENT_SOURCE_DIR}/Info.plist.template)
+    set_target_properties(knotify PROPERTIES MACOSX_BUNDLE_GUI_IDENTIFIER "org.kde.knotify4")
+    set_target_properties(knotify PROPERTIES MACOSX_BUNDLE_BUNDLE_NAME "KDE Notify")
+endif (Q_WS_MAC)
+
 target_link_libraries( knotify ${KDE4_KDEUI_LIBS} ${KDE4_PHONON_LIBS})
 
 set_target_properties(knotify PROPERTIES OUTPUT_NAME knotify4 )
diff -Nurd kdebase-runtime-4.3.0/knotify/Info.plist.template kdebase-runtime-4.3.0-new/knotify/Info.plist.template
--- kdebase-runtime-4.3.0/knotify/Info.plist.template	1969-12-31 19:00:00.000000000 -0500
+++ kdebase-runtime-4.3.0-new/knotify/Info.plist.template	2009-07-29 21:58:19.000000000 -0400
@@ -0,0 +1,36 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
+<plist version="1.0">
+<dict>
+    <key>CFBundleDevelopmentRegion</key>
+    <string>English</string>
+    <key>CFBundleExecutable</key>
+    <string>${MACOSX_BUNDLE_EXECUTABLE_NAME}</string>
+    <key>CFBundleGetInfoString</key>
+    <string>${MACOSX_BUNDLE_INFO_STRING}</string>
+    <key>CFBundleIconFile</key>
+    <string>${MACOSX_BUNDLE_ICON_FILE}</string>
+    <key>CFBundleIdentifier</key>
+    <string>${MACOSX_BUNDLE_GUI_IDENTIFIER}</string>
+    <key>CFBundleInfoDictionaryVersion</key>
+    <string>6.0</string>
+    <key>CFBundleLongVersionString</key>
+    <string>${MACOSX_BUNDLE_LONG_VERSION_STRING}</string>
+    <key>CFBundleName</key>
+    <string>${MACOSX_BUNDLE_BUNDLE_NAME}</string>
+    <key>CFBundlePackageType</key>
+    <string>APPL</string>
+    <key>CFBundleShortVersionString</key>
+    <string>${MACOSX_BUNDLE_SHORT_VERSION_STRING}</string>
+    <key>CFBundleVersion</key>
+    <string>${MACOSX_BUNDLE_BUNDLE_VERSION}</string>
+    <key>CSResourcesFileMapped</key>
+    <true/>
+    <key>LSRequiresCarbon</key>
+    <true/>
+    <key>LSUIElement</key>
+    <string>1</string>
+    <key>NSHumanReadableCopyright</key>
+    <string>${MACOSX_BUNDLE_COPYRIGHT}</string>
+</dict>
+</plist>
diff -Nurd kdebase-runtime-4.3.0/nepomuk/kioslaves/search/CMakeLists.txt kdebase-runtime-4.3.0-new/nepomuk/kioslaves/search/CMakeLists.txt
--- kdebase-runtime-4.3.0/nepomuk/kioslaves/search/CMakeLists.txt	2009-07-21 11:18:35.000000000 -0400
+++ kdebase-runtime-4.3.0-new/nepomuk/kioslaves/search/CMakeLists.txt	2009-07-29 21:58:19.000000000 -0400
@@ -8,6 +8,7 @@
   ${QT_INCLUDES}
   ${KDE4_INCLUDES}
   ${KDE4_KIO_INCLUDES}
+  ${SOPRANO_INCLUDE_DIR}
   ${NEPOMUK_INCLUDE_DIR}
   ${nepomuk_SOURCE_DIR}/libnepomukquery
 )
diff -Nurd kdebase-runtime-4.3.0/nepomuk/kioslaves/search/querymetatype.h kdebase-runtime-4.3.0-new/nepomuk/kioslaves/search/querymetatype.h
--- kdebase-runtime-4.3.0/nepomuk/kioslaves/search/querymetatype.h	2009-02-04 13:18:07.000000000 -0500
+++ kdebase-runtime-4.3.0-new/nepomuk/kioslaves/search/querymetatype.h	2009-07-29 21:58:19.000000000 -0400
@@ -26,6 +26,9 @@
 
 #include "query.h"
 
+#ifndef _KDE_FINAL_Nepomuk_Search_Query
+#define _KDE_FINAL_Nepomuk_Search_Query
 Q_DECLARE_METATYPE(Nepomuk::Search::Query)
+#endif
 
 #endif
diff -Nurd kdebase-runtime-4.3.0/nepomuk/libnepomukquery/dbusoperators.cpp kdebase-runtime-4.3.0-new/nepomuk/libnepomukquery/dbusoperators.cpp
--- kdebase-runtime-4.3.0/nepomuk/libnepomukquery/dbusoperators.cpp	2008-11-28 10:33:44.000000000 -0500
+++ kdebase-runtime-4.3.0-new/nepomuk/libnepomukquery/dbusoperators.cpp	2009-07-29 21:58:19.000000000 -0400
@@ -23,9 +23,14 @@
 
 Q_DECLARE_METATYPE(Nepomuk::Search::Result)
 Q_DECLARE_METATYPE(Nepomuk::Search::Term)
+#ifndef _KDE_FINAL_Nepomuk_Search_Query
+#define _KDE_FINAL_Nepomuk_Search_Query
 Q_DECLARE_METATYPE(Nepomuk::Search::Query)
+#endif
 Q_DECLARE_METATYPE(Soprano::Node)
+#ifndef _NEPOMUK_VARIANT_H_
 Q_DECLARE_METATYPE(QList<int>)
+#endif
 Q_DECLARE_METATYPE(QList<Nepomuk::Search::Result>)
 
 
diff -Nurd kdebase-runtime-4.3.0/nepomuk/services/queryservice/CMakeLists.txt kdebase-runtime-4.3.0-new/nepomuk/services/queryservice/CMakeLists.txt
--- kdebase-runtime-4.3.0/nepomuk/services/queryservice/CMakeLists.txt	2009-07-21 11:18:36.000000000 -0400
+++ kdebase-runtime-4.3.0-new/nepomuk/services/queryservice/CMakeLists.txt	2009-07-29 21:58:19.000000000 -0400
@@ -7,6 +7,7 @@
 include_directories(
   ${QT_INCLUDES}
   ${KDE4_INCLUDES}
+  ${SOPRANO_INCLUDE_DIR}
   ${NEPOMUK_INCLUDES}
   ${nepomuk_SOURCE_DIR}/libnepomukquery
 )
diff -Nurd kdebase-runtime-4.3.0/phonon/platform_kde/devicelisting.cpp kdebase-runtime-4.3.0-new/phonon/platform_kde/devicelisting.cpp
--- kdebase-runtime-4.3.0/phonon/platform_kde/devicelisting.cpp	2008-10-17 07:00:15.000000000 -0400
+++ kdebase-runtime-4.3.0-new/phonon/platform_kde/devicelisting.cpp	2009-07-29 21:58:19.000000000 -0400
@@ -35,7 +35,10 @@
 #endif // HAVE_ALSA_ASOUNDLIB_H
 
 typedef QList<QPair<QByteArray, QString> > PhononDeviceAccessList;
+#ifndef _KDE_FINAL_PhononDeviceAccessList
+#define _KDE_FINAL_PhononDeviceAccessList
 Q_DECLARE_METATYPE(PhononDeviceAccessList)
+#endif
 
 static void installAlsaPhononDeviceHandle()
 {
diff -Nurd kdebase-runtime-4.3.0/phonon/platform_kde/kdeplatformplugin.cpp kdebase-runtime-4.3.0-new/phonon/platform_kde/kdeplatformplugin.cpp
--- kdebase-runtime-4.3.0/phonon/platform_kde/kdeplatformplugin.cpp	2009-01-16 10:04:57.000000000 -0500
+++ kdebase-runtime-4.3.0-new/phonon/platform_kde/kdeplatformplugin.cpp	2009-07-29 21:58:19.000000000 -0400
@@ -44,8 +44,11 @@
 typedef QPair<QByteArray, QString> PhononDeviceAccess;
 typedef QList<PhononDeviceAccess> PhononDeviceAccessList;
 #ifndef KDE_USE_FINAL
+#ifndef _KDE_FINAL_PhononDeviceAccessList
+#define _KDE_FINAL_PhononDeviceAccessList
 Q_DECLARE_METATYPE(PhononDeviceAccessList)
 #endif
+#endif
 namespace Phonon
 {
 
