Package: fop
Version: 0.95
Revision: 2
Source: mirror:apache:/xmlgraphics/%n/binaries/%n-%v-bin.tar.gz
Source-MD5: 7af50bf58924dd22d71d22d8ad90b268
SourceDirectory: %n-%v
Type: java (1.5)
Depends: <<
	commons-logging (>= 1.0.4-1),
	xalan-j (>= 2.7.1-1),
	xerces-j (>= 2.7.1-1),
	system-java (>= 1.5-1)
<<
BuildDepends: fink (>= 0.24.12-1), system-java-dev (>= 1.5-1)
PatchFile: %n.patch
Patchfile-MD5: 7bc8df4ea1bcf48c02f58977f4e11565
PatchScript: sed 's|@FINKPREFIX@|%p|g' < %{PatchFile} | patch -p1
CompileScript: echo "none needed"
InstallScript: <<
#!/bin/sh -ev

	# $FOP_HOME
	install -d -m 755 %i/share/%N
	mv build conf fop lib %i/share/%N/
	install -d -m 755 %i/etc
	cat <<END >%i/etc/fop.conf
FOP_HOME="%p/share/fop"
export FOP_HOME
END

	# fink java path
	install -d -m 755 %i/share/java/%N
	ln -sf %p/share/fop/build/fop.jar %i/share/java/%N/fop.jar
	pushd %i/share/%N/lib
		for file in \
			avalon-framework*.jar \
			batik*.jar \
			commons-io*.jar \
			serializer*.jar \
			xmlgraphics-common*.jar \
		; do
			ln -sf %p/share/%N/lib/$file %i/share/java/%N/$file
		done
	popd

	# documentation
	install -d -m 755 %i/share/doc/%N
	mv docs examples javadocs %i/share/doc/%N/

	# binaries
	install -d -m 755 %i/bin
	cat <<END >%i/bin/fop
#!/bin/sh
. %p/share/%N/fop
END

	cat <<END >%i/bin/fop_pfmreader
#!/bin/sh
MAIN_CLASS=org.apache.fop.fonts.apps.PFMReader
. %p/share/%N/fop
END

	cat <<END >%i/bin/fop_ttfreader
#!/bin/sh
MAIN_CLASS=org.apache.fop.fonts.apps.TTFReader
. %p/share/%N/fop
END

	cat <<END >%i/bin/xalan
#!/bin/sh
MAIN_CLASS=org.apache.xalan.xslt.Process
. %p/share/%N/fop
END

	chmod 755 %i/bin/*

<<
ConfFiles: %p/etc/fop.conf
DocFiles: KEYS LICENSE NOTICE README status.xml
Description: Formatting Objects (FO) Processor
DescDetail: <<
FOP (Formatting Objects Processor) is the world's first print formatter driven 
by XSL formatting objects and the world's first output independent formatter. 

It is a Java application that reads a formatting object tree and then renders 
the resulting pages to a specified output. Output formats  currently supported 
are PDF, PCL, PS, SVG, XML (area tree representation), Print, AWT, MIF and TXT. 
<<
DescPort: <<
Previous maintainers Thomas Kotzian and Michele Garoche
Changed all references to java-home in patch to specific java 1.4.2 version
Added xalan script to allow debugging xsl-fo step results.
<<
Maintainer: Benjamin Reed <fop@fink.raccoonfink.com>
License: BSD
Homepage: http://xmlgraphics.apache.org/fop/
